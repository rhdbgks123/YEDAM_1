<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.mapper.LastItemMapper">

<insert id = "lastItemViewAdd" parameterType="map" >
insert into tb_last_item
 (user_id,
  item_code,
  created_by,
  updated_by)
values( #{userId},
        #{itemCode},
        'myk',
        'myk')
</insert>

<select id = "lastItemViewList" parameterType="String" resultType = "last">
select *
              from tb_last_item
              where create_date between trunc(sysdate)-1 and trunc(sysdate)+1 
                <if test="userId != null">
    AND user_id = #{userId}
  </if>
  <if test="userId == null">
    AND user_id IS NULL
  </if>                             
              order by create_date desc;
<![CDATA[
where rownum<=3
]]>  
</select>

</mapper>